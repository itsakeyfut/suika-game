# ã‚¹ã‚¤ã‚«ã‚²ãƒ¼ãƒ  - UI/UXè¨­è¨ˆæ›¸

## 1. UIè¨­è¨ˆã®åŸºæœ¬æ–¹é‡

### 1.1 ãƒ‡ã‚¶ã‚¤ãƒ³ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
- **ã‚·ãƒ³ãƒ—ãƒ«**: æƒ…å ±ã‚’éåº¦ã«è©°ã‚è¾¼ã¾ãšã€ãƒ—ãƒ¬ã‚¤ã«é›†ä¸­ã§ãã‚‹UI
- **èª­ã¿ã‚„ã™ã•**: å¤§ããªãƒ•ã‚©ãƒ³ãƒˆã€é«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼ãƒ»ã‚¯ãƒªãƒƒã‚¯çŠ¶æ…‹ã‚’æ˜ç¢ºã«
- **ãƒ”ã‚¯ã‚»ãƒ«ã‚¢ãƒ¼ãƒˆèª¿**: ã‚²ãƒ¼ãƒ ã®ã‚¢ãƒ¼ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ãŸçµ±ä¸€æ„Ÿ

### 1.2 ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

```rust
// åŸºæœ¬è‰²
pub const BG_COLOR: Color = Color::srgb(0.95, 0.95, 0.90);        // è–„ã„ãƒ™ãƒ¼ã‚¸ãƒ¥
pub const PRIMARY_COLOR: Color = Color::srgb(0.3, 0.6, 0.3);     // ç·‘
pub const SECONDARY_COLOR: Color = Color::srgb(0.9, 0.5, 0.2);   // ã‚ªãƒ¬ãƒ³ã‚¸
pub const TEXT_COLOR: Color = Color::srgb(0.1, 0.1, 0.1);        // ãƒ€ãƒ¼ã‚¯ã‚°ãƒ¬ãƒ¼
pub const HIGHLIGHT_COLOR: Color = Color::srgb(1.0, 0.9, 0.0);   // é»„è‰²

// UIè¦ç´ 
pub const BUTTON_NORMAL: Color = Color::srgb(0.4, 0.7, 0.4);     // æ˜ã‚‹ã„ç·‘
pub const BUTTON_HOVER: Color = Color::srgb(0.5, 0.8, 0.5);      // ã‚ˆã‚Šæ˜ã‚‹ã„ç·‘
pub const BUTTON_PRESSED: Color = Color::srgb(0.3, 0.5, 0.3);    // æš—ã„ç·‘
```

### 1.3 ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š

```rust
// ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º
pub const FONT_SIZE_HUGE: f32 = 72.0;      // ã‚¿ã‚¤ãƒˆãƒ«
pub const FONT_SIZE_LARGE: f32 = 48.0;     // ã‚¹ã‚³ã‚¢
pub const FONT_SIZE_MEDIUM: f32 = 32.0;    // ãƒœã‚¿ãƒ³ã€ãƒ©ãƒ™ãƒ«
pub const FONT_SIZE_SMALL: f32 = 24.0;     // è£œåŠ©æƒ…å ±

// ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
// assets/fonts/PixelFont.ttf ãªã©ã®ãƒ”ã‚¯ã‚»ãƒ«ãƒ•ã‚©ãƒ³ãƒˆã‚’ä½¿ç”¨
```

## 2. ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

### 2.1 ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚  ã‚¹ã‚¤ã‚«ã‚²ãƒ¼ãƒ       â”‚  (72px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚   ã‚¹ã‚¿ãƒ¼ãƒˆ       â”‚  (48px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚   æ“ä½œæ–¹æ³•       â”‚  (32px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â”‚    ãƒã‚¤ã‚¹ã‚³ã‚¢: 12,345 ç‚¹    (24px)     â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.1.1 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

**ã‚¿ã‚¤ãƒˆãƒ«ãƒ†ã‚­ã‚¹ãƒˆ**:
- ä½ç½®: ä¸­å¤®ä¸Šéƒ¨ï¼ˆY: 200px from centerï¼‰
- ã‚µã‚¤ã‚º: 72px
- ã‚«ãƒ©ãƒ¼: PRIMARY_COLOR
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: ã‚†ã£ãã‚Šä¸Šä¸‹ã«æºã‚Œã‚‹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³**:
- ä½ç½®: ä¸­å¤®ï¼ˆY: 0pxï¼‰
- ã‚µã‚¤ã‚º: 240x80px
- ãƒ•ã‚©ãƒ³ãƒˆ: 48px
- çŠ¶æ…‹: Normal / Hover / Pressed

**æ“ä½œæ–¹æ³•ãƒœã‚¿ãƒ³**:
- ä½ç½®: ä¸­å¤®ä¸‹ï¼ˆY: -100pxï¼‰
- ã‚µã‚¤ã‚º: 200x60px
- ãƒ•ã‚©ãƒ³ãƒˆ: 32px

**ãƒã‚¤ã‚¹ã‚³ã‚¢è¡¨ç¤º**:
- ä½ç½®: ä¸‹éƒ¨ä¸­å¤®ï¼ˆY: -250pxï¼‰
- ãƒ•ã‚©ãƒ³ãƒˆ: 24px
- ã‚«ãƒ©ãƒ¼: TEXT_COLOR

### 2.2 ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [æ¬¡]           ã‚¹ã‚³ã‚¢: 12,345        æ™‚é–“: 5:23 â”‚
â”‚  [ğŸ’]           â˜…â˜…â˜…â˜…â˜…              ãƒã‚¤: 20,000â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚              [å¢ƒç•Œç·š]              â”‚          â”‚
â”‚ â”‚                                  â”‚          â”‚
â”‚ â”‚          ğŸ’                      â”‚          â”‚
â”‚ â”‚              ğŸ“                  â”‚          â”‚
â”‚ â”‚    ğŸ‡                            â”‚          â”‚
â”‚ â”‚         ğŸŠ  ğŸŠ                   â”‚          â”‚
â”‚ â”‚           ğŸ‘    ğŸ               â”‚          â”‚
â”‚ â”‚  ğŸ  ğŸˆ      ğŸŒ                  â”‚          â”‚
â”‚ â”‚     ğŸ‰  ğŸ’  ğŸ“  ğŸ‡  ğŸŠ          â”‚  ã‚³ãƒ³ãƒœ   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   Ã—3!    â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2.1 HUDè¦ç´ 

**å·¦ä¸Š: æ¬¡ã®ãƒ•ãƒ«ãƒ¼ãƒ„ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**:
```rust
fn setup_next_fruit_preview(
    parent: &mut ChildBuilder,
    asset_server: &AssetServer,
) {
    parent.spawn(NodeBundle {
        style: Style {
            position_type: PositionType::Absolute,
            left: Val::Px(20.0),
            top: Val::Px(20.0),
            width: Val::Px(100.0),
            height: Val::Px(120.0),
            flex_direction: FlexDirection::Column,
            align_items: AlignItems::Center,
            ..default()
        },
        background_color: Color::srgba(1.0, 1.0, 1.0, 0.8).into(),
        ..default()
    }).with_children(|parent| {
        // "æ¬¡" ãƒ©ãƒ™ãƒ«
        parent.spawn(TextBundle::from_section(
            "æ¬¡",
            TextStyle {
                font_size: 24.0,
                color: TEXT_COLOR,
                ..default()
            },
        ));

        // ãƒ•ãƒ«ãƒ¼ãƒ„ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆã‚¹ãƒ—ãƒ©ã‚¤ãƒˆï¼‰
        parent.spawn(ImageBundle {
            style: Style {
                width: Val::Px(60.0),
                height: Val::Px(60.0),
                ..default()
            },
            ..default()
        }).insert(NextFruitPreview);  // ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ã‚«ãƒ¼
    });
}
```

**ä¸­å¤®ä¸Š: ã‚¹ã‚³ã‚¢è¡¨ç¤º**:
- ä½ç½®: ä¸­å¤®ä¸Šéƒ¨
- ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: 48pxï¼ˆå¤§ããç›®ç«‹ã¤ï¼‰
- ã‚«ãƒ©ãƒ¼: PRIMARY_COLOR
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: `ã‚¹ã‚³ã‚¢: 12,345` ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: ã‚¹ã‚³ã‚¢åŠ ç®—æ™‚ã«ä¸€ç¬å¤§ãããªã‚‹

**å³ä¸Š: ã‚¿ã‚¤ãƒãƒ¼ã¨ãƒã‚¤ã‚¹ã‚³ã‚¢**:
```
æ™‚é–“: 5:23
ãƒã‚¤: 20,000
```
- ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: 24px
- ã‚«ãƒ©ãƒ¼: TEXT_COLOR
- ä½ç½®: å³ä¸Šéš…ï¼ˆãƒãƒ¼ã‚¸ãƒ³20pxï¼‰

**å³ä¸‹: ã‚³ãƒ³ãƒœã‚«ã‚¦ãƒ³ã‚¿ãƒ¼**:
- è¡¨ç¤ºæ¡ä»¶: ã‚³ãƒ³ãƒœãŒ2ä»¥ä¸Šã®æ™‚ã®ã¿è¡¨ç¤º
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: `ã‚³ãƒ³ãƒœ Ã—3!`
- ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: 32px
- ã‚«ãƒ©ãƒ¼: HIGHLIGHT_COLOR
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆã€ãƒ‘ãƒ«ã‚¹åŠ¹æœ

#### 2.2.2 ã‚²ãƒ¼ãƒ ã‚¨ãƒªã‚¢ï¼ˆç®±ï¼‰

**å¢ƒç•Œç·šï¼ˆãƒ‡ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ï¼‰**:
- ä½ç½®: ç®±ã®ä¸Šéƒ¨ã‹ã‚‰100pxä¸‹
- ã‚¹ã‚¿ã‚¤ãƒ«: èµ¤ã„ç‚¹ç·š
- å¹…: 2px
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: ç‚¹æ»…ï¼ˆè­¦å‘Šæ™‚ï¼‰

**ç®±ã®è¦–è¦šãƒ‡ã‚¶ã‚¤ãƒ³**:
- å·¦å£ã€å³å£ã€åº•é¢: èŒ¶è‰²ï¼ˆæœ¨è£½ã®å¤–è¦³ï¼‰
- èƒŒæ™¯: è–„ã„ã‚°ãƒ¬ãƒ¼ã¾ãŸã¯ç™½
- å½±: ç®±ã®å¤–å´ã«è–„ã„å½±ï¼ˆç«‹ä½“æ„Ÿï¼‰

### 2.3 ãƒãƒ¼ã‚ºãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢

ESCã‚­ãƒ¼ã§è¡¨ç¤ºã•ã‚Œã‚‹ãƒãƒ¼ã‚ºãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚    ãƒãƒ¼ã‚ºä¸­      â”‚  (48px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚   ã‚²ãƒ¼ãƒ ã«æˆ»ã‚‹    â”‚  (32px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚  ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹   â”‚  (32px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚    è¨­å®šï¼ˆäºˆå®šï¼‰   â”‚  (32px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€»ã‚²ãƒ¼ãƒ ç”»é¢ã‚’åŠé€æ˜ã®é»’ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã§è¦†ã„ã€
  ãã®ä¸Šã«ãƒãƒ¼ã‚ºãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤º
```

**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè©³ç´°**:
- **ç”»é¢å…¨ä½“**: åŠé€æ˜ã®é»’ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆ`Color::srgba(0.0, 0.0, 0.0, 0.7)`ï¼‰
- **ãƒãƒ¼ã‚ºã‚¿ã‚¤ãƒˆãƒ«**: ä¸­å¤®ä¸Šéƒ¨ã€ç™½ãƒ†ã‚­ã‚¹ãƒˆã€48px
- **ãƒœã‚¿ãƒ³**: ç¸¦æ–¹å‘ã«ä¸­å¤®æƒãˆã€å„ãƒœã‚¿ãƒ³é–“ã«20pxã®ãƒãƒ¼ã‚¸ãƒ³
- **ãƒœã‚¿ãƒ³ã‚µã‚¤ã‚º**: å¹…300pxã€é«˜ã•60px

**ãƒœã‚¿ãƒ³è©³ç´°**:

1. **ã‚²ãƒ¼ãƒ ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³**
   - æ©Ÿèƒ½: ESCã‚­ãƒ¼ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã§ã‚²ãƒ¼ãƒ ã‚’å†é–‹
   - çŠ¶æ…‹é·ç§»: `AppState::Paused` â†’ `AppState::Playing`
   - ãƒ›ãƒƒãƒˆã‚­ãƒ¼: ESC

2. **ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³**
   - æ©Ÿèƒ½: ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã«æˆ»ã‚‹ï¼ˆç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã¯çµ‚äº†ï¼‰
   - ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãªã—ï¼ˆç°¡ç´ åŒ–ï¼‰
   - çŠ¶æ…‹é·ç§»: `AppState::Paused` â†’ `AppState::Title`

3. **è¨­å®šãƒœã‚¿ãƒ³ï¼ˆå°†æ¥å®Ÿè£…ï¼‰**
   - éŸ³é‡èª¿æ•´ã€ç”»é¢è¨­å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç”»é¢
   - åˆæœŸå®Ÿè£…ã§ã¯éæ´»æ€§åŒ–ï¼ˆã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆï¼‰

**å®Ÿè£…ãƒ¡ãƒ¢**:
```rust
#[derive(Component)]
pub struct PauseMenu;

#[derive(Component)]
pub struct ResumeButton;

#[derive(Component)]
pub struct QuitToTitleButton;

fn setup_pause_menu(mut commands: Commands) {
    // åŠé€æ˜ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
    commands.spawn((
        Node {
            width: Val::Percent(100.0),
            height: Val::Percent(100.0),
            position_type: PositionType::Absolute,
            justify_content: JustifyContent::Center,
            align_items: AlignItems::Center,
            flex_direction: FlexDirection::Column,
            ..default()
        },
        BackgroundColor(Color::srgba(0.0, 0.0, 0.0, 0.7)),
        PauseMenu,
    )).with_children(|parent| {
        // "ãƒãƒ¼ã‚ºä¸­"ãƒ†ã‚­ã‚¹ãƒˆ
        parent.spawn((
            Text::new("ãƒãƒ¼ã‚ºä¸­"),
            TextFont {
                font_size: 48.0,
                ..default()
            },
            TextColor(Color::WHITE),
        ));

        // ã‚²ãƒ¼ãƒ ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³
        parent.spawn((
            Button,
            Node {
                width: Val::Px(300.0),
                height: Val::Px(60.0),
                margin: UiRect::all(Val::Px(10.0)),
                justify_content: JustifyContent::Center,
                align_items: AlignItems::Center,
                ..default()
            },
            BackgroundColor(BUTTON_NORMAL),
            ResumeButton,
        )).with_children(|parent| {
            parent.spawn((
                Text::new("ã‚²ãƒ¼ãƒ ã«æˆ»ã‚‹"),
                TextFont {
                    font_size: 32.0,
                    ..default()
                },
                TextColor(TEXT_COLOR),
            ));
        });

        // ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ï¼ˆåŒæ§˜ã®æ§‹é€ ï¼‰
        // ...
    });
}

// ESCã‚­ãƒ¼ã§ãƒãƒ¼ã‚º/è§£é™¤
fn handle_pause_input(
    keyboard: Res<ButtonInput<KeyCode>>,
    current_state: Res<State<AppState>>,
    mut next_state: ResMut<NextState<AppState>>,
) {
    if keyboard.just_pressed(KeyCode::Escape) {
        match current_state.get() {
            AppState::Playing => next_state.set(AppState::Paused),
            AppState::Paused => next_state.set(AppState::Playing),
            _ => {}
        }
    }
}

// ãƒœã‚¿ãƒ³ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
fn handle_resume_button(
    interaction_query: Query<&Interaction, (Changed<Interaction>, With<ResumeButton>)>,
    mut next_state: ResMut<NextState<AppState>>,
) {
    for interaction in interaction_query.iter() {
        if *interaction == Interaction::Pressed {
            next_state.set(AppState::Playing);
        }
    }
}
```

### 2.4 ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚   GAME OVER     â”‚  (72px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â”‚         ã‚ãªãŸã®ã‚¹ã‚³ã‚¢: 12,345  (48px)  â”‚
â”‚                                        â”‚
â”‚      ğŸ‰ æ–°è¨˜éŒ²! ğŸ‰        (æ¡ä»¶ä»˜ã)   â”‚
â”‚                                        â”‚
â”‚         ãƒã‚¤ã‚¹ã‚³ã‚¢: 20,000  (32px)     â”‚
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚  ã‚‚ã†ä¸€åº¦        â”‚  (48px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚  ã‚¿ã‚¤ãƒˆãƒ«ã¸      â”‚  (32px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3.1 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**GAME OVERãƒ†ã‚­ã‚¹ãƒˆ**:
- ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: 72px
- ã‚«ãƒ©ãƒ¼: èµ¤ç³»çµ± `Color::srgb(0.8, 0.2, 0.2)`
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³

**ã‚¹ã‚³ã‚¢è¡¨ç¤º**:
- ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: 48px
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: `ã‚ãªãŸã®ã‚¹ã‚³ã‚¢: 12,345`
- ã‚«ãƒ©ãƒ¼: TEXT_COLOR

**æ–°è¨˜éŒ²é€šçŸ¥**:
- æ¡ä»¶: ã‚¹ã‚³ã‚¢ãŒãƒã‚¤ã‚¹ã‚³ã‚¢ã‚’è¶…ãˆãŸå ´åˆã®ã¿è¡¨ç¤º
- ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: 36px
- ã‚«ãƒ©ãƒ¼: HIGHLIGHT_COLOR
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³: ãƒ‘ãƒ«ã‚¹ã€ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ

**ãƒœã‚¿ãƒ³**:
- ã‚‚ã†ä¸€åº¦ãƒœã‚¿ãƒ³: 240x80pxã€48px ãƒ•ã‚©ãƒ³ãƒˆ
- ã‚¿ã‚¤ãƒˆãƒ«ã¸ãƒœã‚¿ãƒ³: 200x60pxã€32px ãƒ•ã‚©ãƒ³ãƒˆ

### 2.4 æ“ä½œæ–¹æ³•ç”»é¢ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚   æ“ä½œæ–¹æ³•       â”‚  (48px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â”‚
â”‚  ãƒã‚¦ã‚¹æ“ä½œ:                           â”‚
â”‚    - ç§»å‹•: ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã§ä½ç½®æ±ºå®š      â”‚
â”‚    - è½ä¸‹: å·¦ã‚¯ãƒªãƒƒã‚¯                   â”‚
â”‚                                        â”‚
â”‚  ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ:                       â”‚
â”‚    - ç§»å‹•: â† â†’ çŸ¢å°ã‚­ãƒ¼                â”‚
â”‚    - è½ä¸‹: ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼                 â”‚
â”‚                                        â”‚
â”‚  ã‚²ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«:                       â”‚
â”‚    - åŒã˜ãƒ•ãƒ«ãƒ¼ãƒ„ã‚’æ¥è§¦ã•ã›ã¦åˆä½“       â”‚
â”‚    - ã‚¹ã‚¤ã‚«ã‚’ç›®æŒ‡ãã†!                 â”‚
â”‚    - ç®±ã‹ã‚‰æº¢ã‚ŒãŸã‚‰ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼       â”‚
â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚   æˆ»ã‚‹          â”‚  (32px)   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…

### 3.1 ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```rust
#[derive(Component)]
pub struct MenuButton {
    pub action: ButtonAction,
}

#[derive(Clone, Copy)]
pub enum ButtonAction {
    StartGame,
    RetryGame,
    GoToTitle,
    ShowInstructions,
}

fn button_interaction_system(
    mut interaction_query: Query<
        (&Interaction, &mut BackgroundColor, &MenuButton),
        Changed<Interaction>,
    >,
    mut app_state: ResMut<NextState<AppState>>,
    mut game_state: ResMut<GameState>,
) {
    for (interaction, mut color, button) in interaction_query.iter_mut() {
        match *interaction {
            Interaction::Pressed => {
                *color = BUTTON_PRESSED.into();
                match button.action {
                    ButtonAction::StartGame => {
                        app_state.set(AppState::Playing);
                        game_state.reset();
                    }
                    ButtonAction::RetryGame => {
                        app_state.set(AppState::Playing);
                        game_state.reset();
                    }
                    ButtonAction::GoToTitle => {
                        app_state.set(AppState::Title);
                    }
                    // ...
                }
            }
            Interaction::Hovered => {
                *color = BUTTON_HOVER.into();
            }
            Interaction::None => {
                *color = BUTTON_NORMAL.into();
            }
        }
    }
}
```

### 3.2 ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```rust
#[derive(Component)]
pub struct ScoreText;

fn update_score_text(
    game_state: Res<GameState>,
    mut query: Query<&mut Text, With<ScoreText>>,
) {
    if game_state.is_changed() {
        for mut text in query.iter_mut() {
            // ã‚¹ã‚³ã‚¢ã‚’3æ¡ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¡¨ç¤ºï¼ˆæ‰‹å‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰
            text.sections[0].value = format!("ã‚¹ã‚³ã‚¢: {}", format_number_with_commas(game_state.score));
        }
    }
}

// æ•°å€¤ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
fn format_number_with_commas(n: u32) -> String {
    let s = n.to_string();
    let mut result = String::new();
    for (i, c) in s.chars().rev().enumerate() {
        if i > 0 && i % 3 == 0 {
            result.push(',');
        }
        result.push(c);
    }
    result.chars().rev().collect()
}
```

### 3.3 ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```rust
#[derive(Component)]
pub struct TimerText;

fn update_timer_text(
    game_state: Res<GameState>,
    mut query: Query<&mut Text, With<TimerText>>,
) {
    if game_state.is_changed() {
        let minutes = (game_state.elapsed_time as u32) / 60;
        let seconds = (game_state.elapsed_time as u32) % 60;

        for mut text in query.iter_mut() {
            text.sections[0].value = format!("æ™‚é–“: {}:{:02}", minutes, seconds);
        }
    }
}
```

### 3.4 ã‚³ãƒ³ãƒœè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```rust
#[derive(Component)]
pub struct ComboText;

fn update_combo_text(
    game_state: Res<GameState>,
    mut query: Query<(&mut Text, &mut Visibility), With<ComboText>>,
) {
    if game_state.is_changed() {
        for (mut text, mut visibility) in query.iter_mut() {
            if game_state.combo >= 2 {
                text.sections[0].value = format!("ã‚³ãƒ³ãƒœ Ã—{}!", game_state.combo);
                *visibility = Visibility::Visible;
            } else {
                *visibility = Visibility::Hidden;
            }
        }
    }
}
```

## 4. UIã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### 4.1 ã‚¹ã‚³ã‚¢åŠ ç®—æ™‚ã®ãƒ‘ãƒ«ã‚¹åŠ¹æœ

```rust
#[derive(Component)]
pub struct PulseAnimation {
    pub scale_range: f32,
    pub speed: f32,
}

fn pulse_animation_system(
    mut query: Query<(&mut Style, &PulseAnimation)>,
    time: Res<Time>,
) {
    for (mut style, pulse) in query.iter_mut() {
        let scale = 1.0 + (time.elapsed_seconds() * pulse.speed).sin() * pulse.scale_range;
        // Styleã®ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ï¼ˆå®Ÿè£…æ–¹æ³•ã¯è¦æ¤œè¨ï¼‰
    }
}
```

### 4.2 ãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```rust
fn button_hover_animation(
    mut query: Query<(&Interaction, &mut Transform), With<MenuButton>>,
) {
    for (interaction, mut transform) in query.iter_mut() {
        match *interaction {
            Interaction::Hovered => {
                transform.scale = Vec3::splat(1.05);
            }
            _ => {
                transform.scale = Vec3::splat(1.0);
            }
        }
    }
}
```

### 4.3 æ–°è¨˜éŒ²é€šçŸ¥ã®ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ

```rust
fn new_highscore_effect(
    mut commands: Commands,
    query: Query<Entity, With<NewHighscoreText>>,
) {
    for entity in query.iter() {
        // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‚¹ãƒãƒ¼ãƒ³
        // æ˜Ÿã‚„ã‚­ãƒ©ã‚­ãƒ©ã‚’å‘¨ã‚Šã«é…ç½®
    }
}
```

## 5. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

### 5.1 ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºå¯¾å¿œ

```rust
fn adjust_ui_for_window_size(
    windows: Query<&Window>,
    mut ui_query: Query<&mut Style, With<Node>>,
) {
    if let Ok(window) = windows.get_single() {
        let window_width = window.width();
        let window_height = window.height();

        // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã«å¿œã˜ã¦UIã®é…ç½®ã‚’èª¿æ•´
        // å°ã•ã„ç”»é¢ã§ã¯è¦ç´ ã‚’ç¸®å°ã€å¤§ãã„ç”»é¢ã§ã¯æ‹¡å¤§
    }
}
```

### 5.2 ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã®ç¶­æŒ
- ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ã¯å¸¸ã«ä¸€å®šï¼ˆä¾‹: 3:4ï¼‰
- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºãŒå¤‰ã‚ã£ã¦ã‚‚ã‚²ãƒ¼ãƒ ã‚¨ãƒªã‚¢ã¯é©åˆ‡ã«ã‚¹ã‚±ãƒ¼ãƒ«

## 6. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

### 6.1 ã‚«ãƒ©ãƒ¼ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰å¯¾å¿œ
- è‰²ã ã‘ã«é ¼ã‚‰ãªã„æƒ…å ±æç¤º
- ãƒ•ãƒ«ãƒ¼ãƒ„ã¯å½¢ã§ã‚‚åŒºåˆ¥å¯èƒ½ï¼ˆãƒ”ã‚¯ã‚»ãƒ«ã‚¢ãƒ¼ãƒˆï¼‰
- é«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆï¼ˆãƒ†ã‚­ã‚¹ãƒˆã¨èƒŒæ™¯ï¼‰

### 6.2 ãƒ•ã‚©ãƒ³ãƒˆèª­ã¿ã‚„ã™ã•
- ååˆ†ãªãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºï¼ˆæœ€å°24pxï¼‰
- ã‚¯ãƒªã‚¢ãªãƒ•ã‚©ãƒ³ãƒˆï¼ˆãƒ”ã‚¯ã‚»ãƒ«ãƒ•ã‚©ãƒ³ãƒˆã€ã‚¢ãƒ³ãƒã‚¨ã‚¤ãƒªã‚¢ã‚¹ãªã—ï¼‰

## 7. UIçŠ¶æ…‹ç®¡ç†

### 7.1 çŠ¶æ…‹é·ç§»å›³

```
Title Screen
    â†“ (Start Button)
Playing
    â†“ (Game Over)
Game Over Screen
    â†“ (Retry Button)
Playing
    â†“ (Title Button)
Title Screen
```

### 7.2 UIè¦ç´ ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

å„ç”»é¢ã®çŠ¶æ…‹ã«å¿œã˜ã¦UIã‚’ç”Ÿæˆãƒ»å‰Šé™¤ï¼š

```rust
fn setup_title_ui(
    mut commands: Commands,
) {
    commands.spawn((
        NodeBundle { /* ... */ },
        StateScoped(AppState::Title),  // ã“ã®çŠ¶æ…‹ã‚’æŠœã‘ãŸã‚‰è‡ªå‹•å‰Šé™¤
    ));
}
```

## 8. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®

### 8.1 ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°ã®æœ€é©åŒ–
- å¤‰æ›´ãŒã‚ã£ãŸæ™‚ã®ã¿æ›´æ–°ï¼ˆChanged<T> ãƒ•ã‚£ãƒ«ã‚¿ï¼‰
- æ¯ãƒ•ãƒ¬ãƒ¼ãƒ æ›´æ–°ãŒå¿…è¦ãªã„è¦ç´ ã¯é©åˆ‡ãªé »åº¦ã§æ›´æ–°

### 8.2 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå†è¨ˆç®—ã®æœ€å°åŒ–
- å‹•çš„ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå¤‰æ›´ã¯æœ€å°é™ã«
- é™çš„ãªé…ç½®ã‚’å„ªå…ˆ

## 9. ãƒ‡ãƒãƒƒã‚°UIï¼ˆé–‹ç™ºä¸­ã®ã¿ï¼‰

### 9.1 ãƒ‡ãƒãƒƒã‚°æƒ…å ±è¡¨ç¤º

```rust
#[cfg(debug_assertions)]
fn debug_ui(
    mut commands: Commands,
    diagnostics: Res<DiagnosticsStore>,
) {
    // FPSè¡¨ç¤º
    // ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æ•°è¡¨ç¤º
    // ç‰©ç†æ¼”ç®—ã®è² è·è¡¨ç¤º
}
```

---

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**æœ€çµ‚æ›´æ–°**: 2026-02-15
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æ‰¿èªæ¸ˆã¿
